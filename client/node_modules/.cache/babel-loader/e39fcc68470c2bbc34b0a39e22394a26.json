{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/maelj/Documents/programmation/Web/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/maelj/Documents/programmation/Web/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/maelj/Documents/programmation/Web/pern-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Fragment,useEffect,useState}from\"react\";import EditTodo from'./EditTodo';var ListTodos=function ListTodos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//delete todo fonction\nvar deleteTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var _deleteTodo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:_deleteTodo=_context.sent;console.log(_deleteTodo);setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function deleteTodo(_x){return _ref.apply(this,arguments);};}();var getTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,jsonData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000/todos\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;//console.log(jsonData);\nsetTodos(jsonData);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function getTodos(){return _ref2.apply(this,arguments);};}();useEffect(function(){getTodos();},[]);console.log(todos);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{class:\"table mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:todo.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTodo,{todo:todo})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id);},children:\"Delete\"})})]},todo.todo_id);})})]})});};export default ListTodos;","map":{"version":3,"sources":["C:/Users/maelj/Documents/programmation/Web/pern-todo/client/src/components/ListTodos.js"],"names":["React","Fragment","useEffect","useState","EditTodo","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","console","log","filter","todo","todo_id","error","message","getTodos","response","json","jsonData","map","description"],"mappings":"2mBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,QAApC,KAAmD,OAAnD,CAEA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eAEMF,QAAQ,CAAC,EAAD,CAFd,wCAEbG,KAFa,eAENC,QAFM,eAIxB;AACA,GAAMC,CAAAA,UAAU,0FAAG,iBAAOC,EAAP,wKAEcC,CAAAA,KAAK,uCAAgCD,EAAhC,EAC9B,CAACE,MAAM,CAAE,QAAT,CAD8B,CAFnB,QAELH,WAFK,eAIXI,OAAO,CAACC,GAAR,CAAYL,WAAZ,EACAD,QAAQ,CAACD,KAAK,CAACQ,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,OAAL,GAAiBP,EAArB,EAAjB,CAAD,CAAR,CALW,+EAOXG,OAAO,CAACK,KAAR,CAAc,YAAMC,OAApB,EAPW,oEAAH,kBAAVV,CAAAA,UAAU,4CAAhB,CAaI,GAAMW,CAAAA,QAAQ,2FAAG,sMAEcT,CAAAA,KAAK,CAAC,6BAAD,CAFnB,QAEHU,QAFG,uCAGcA,CAAAA,QAAQ,CAACC,IAAT,EAHd,QAGHC,QAHG,gBAIT;AACAf,QAAQ,CAACe,QAAD,CAAR,CALS,qFAOTV,OAAO,CAACK,KAAR,CAAc,aAAMC,OAApB,EAPS,uEAAH,kBAARC,CAAAA,QAAQ,2CAAd,CAWAjB,SAAS,CAAC,UAAK,CACXiB,QAAQ,GAEX,CAHQ,CAGP,EAHO,CAAT,CAIAP,OAAO,CAACC,GAAR,CAAYP,KAAZ,EACA,mBACI,KAAC,QAAD,wBACI,eAAO,KAAK,CAAC,wBAAb,wBACR,oCACE,mCACE,mCADF,cAEE,4BAFF,cAGE,8BAHF,GADF,EADQ,cAQR,uBAMKA,KAAK,CAACiB,GAAN,CAAU,SAAAR,IAAI,qBACX,mCACI,oBAAKA,IAAI,CAACS,WAAV,EADJ,cAEI,iCAAI,KAAC,QAAD,EAAU,IAAI,CAAIT,IAAlB,EAAJ,EAFJ,cAGI,iCAAI,eAAQ,SAAS,CAAG,gBAApB,CAAqC,OAAO,CAAI,yBAAMP,CAAAA,UAAU,CAACO,IAAI,CAACC,OAAN,CAAhB,EAAhD,oBAAJ,EAHJ,GAAWD,IAAI,CAACC,OAAhB,CADW,EAAd,CANL,EARQ,GADJ,EADJ,CA2BH,CA7DD,CA+DA,cAAeX,CAAAA,SAAf","sourcesContent":["import React, {Fragment, useEffect, useState} from \"react\";\r\n\r\nimport EditTodo from './EditTodo';\r\n\r\n\r\nconst ListTodos = () => {\r\n\r\n    const [todos, setTodos] = useState([]);\r\n\r\n//delete todo fonction\r\nconst deleteTodo = async (id) => {\r\n    try {\r\n        const deleteTodo = await fetch(`http://localhost:5000/todos/${id}`,\r\n        {method: \"DELETE\"});\r\n        console.log(deleteTodo);\r\n        setTodos(todos.filter(todo => todo.todo_id !== id));\r\n    } catch (error) {\r\n        console.error(error.message);\r\n        \r\n    }\r\n}\r\n\r\n\r\n    const getTodos = async () => {\r\n        try {\r\n            const response = await fetch(\"http://localhost:5000/todos\");\r\n            const jsonData = await response.json();\r\n            //console.log(jsonData);\r\n            setTodos(jsonData);\r\n        } catch (error) {\r\n            console.error(error.message);\r\n            \r\n        }\r\n    }\r\n    useEffect(()=> {\r\n        getTodos();\r\n        \r\n    },[]);\r\n    console.log(todos)\r\n    return (\r\n        <Fragment>\r\n            <table class=\"table mt-5 text-center\">\r\n    <thead>\r\n      <tr>\r\n        <th>Description</th>\r\n        <th>Edit</th>\r\n        <th>Delete</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n        {/*       <tr>\r\n        <td>John</td>\r\n        <td>Doe</td>\r\n        <td>john@example.com</td>\r\n      </tr>*/}\r\n        {todos.map(todo => (\r\n            <tr key = {todo.todo_id}>\r\n                <td>{todo.description}</td>\r\n                <td><EditTodo todo = {todo}/></td>\r\n                <td><button className = \"btn btn-danger\" onClick = {() => deleteTodo(todo.todo_id)}>Delete</button></td>\r\n            </tr>\r\n        ))}\r\n    </tbody>\r\n  </table>\r\n        </Fragment>\r\n    )\r\n};\r\n\r\nexport default ListTodos;"]},"metadata":{},"sourceType":"module"}